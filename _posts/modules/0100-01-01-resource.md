---
layout: module
title: Resource
abstract: The resource module contains functions that allow you to iterate over the attributes of your application's resources.
author: Bediako George
categories:
- modules
published: true
---

# Introduction
Airlift is a restful framework.  Resources are the center of Airlift application development.  When designing an application, developers are encouraged to create as many resources as they like.  The resource.js module contains functions that allow developers to traverse the application resources' attributes.  In Airlift a resource is represented as a simple JavaScript object ({}).

Whenever a iterative function is executed in resource, the iterator function that you provide is executed within a context that governs the traversal of that resource.  This context is set as the 'this' for the iterator function.  It makes available following:

* resourceName - the name of the resource being traversed.
* resourceMetadata - metadata describing the resource being traversed.  It contains a list of attributes this resource holds.
* attributesMetadata - metadata describing each individual attribute this resource holds.
* foreignKeys - a list of names of all the foreign keys in this resource.
* attributes - a list of names of all the attributes in this resource.
* web - a web object that gives access to the web context.  The web context contains information about the current request.
* report - a function used to report errors.
* allErrors - a function that returns all errors reported so far.
* getErrors - a function that returns all errors reported for a given attribute of this resource.

All iterative functions in resource.js allow for the replacement of any of the attributes of the context object by optionally providing an object at invocation time.

The functions available in this module are described below.

## Each

each(resourceName, resource, iterator, \[context\])
* resourceName - name of the resource
* resource - the simple JavaScript object containing the resource information.
* iterator - the function to be executed on each attribute resource.
* context - an optional context used to override any of the attributes of the this provided to the iterator function at runtime.

### example
    var person = {fullName: 'Kwame Mtume', shortName: 'Kwame', age: 27};
    var lightPerson = {};
    var res = require('resource');
    var context = {attributes: ['shortName', 'age']}; 
    res.each('person', person, function(_value, _name, _resource, _metadata)
    {
       lightPerson[_name] = _value;
    } , context);
	util.println(JSON.stringify(lightPerson)); // {shortName: 'Kwame', age: 27 }

## Map

var result = map(resourceName, resource, iterator, \[context\])
* resourceName - name of the resource
* resource - the simple JavaScript object containing the resource information.
* iterator - the function to be executed on each attribute resource.
* context - an optional context used to override any of the attributes of the this provided to the iterator function at runtime.
* result - an object containing the results of each iterator execution for each attribute in resource.

### example
    var person = {fullName: 'Kwame Mtume', shortName: 'Kwame', age: 27};
    var res = require('resource');
    var context = {attributes: ['shortName', 'age']}; 
    var lightPerson = res.map('person', person, function(_value, _name, _resource, _metadata)
    {
       return _value;
    } , context);
    util.println(JSON.stringify(lightPerson)); // {shortName: 'Kwame', age: 27 }
    
Substance is fast. With Substance all operations are performed locally, giving it a huge speed advantage on centralized systems that constantly have to communicate with a server somewhere. The Substance Composer applies operations locally first, then distributes the changes over the network.

## Secure

Documents are stored locally on your computer. They are safe and secure until you hit publish and replicate them with a trusted Substance Hub.

# Usage

While editing a document, if you ever want to see what's happening behind the curtain, just press `ctrl` + `alt` + `c` to open the Substance Console and inspect the document's operation history.

# Install (OSX)

## Prequesites

Make sure you have XCode and Macports or Homebrew installed. Then install some libraries:

	$ port install pcre cmake
or  

	$ brew install pcre cmake
    
## Clone repository

    $ git clone git@github.com:substance/composer.git
    $ cd composer

## Build externals

    $ mkdir build-ext
    $ cd build-ext
    $ cmake -DEXTERNALS_ONLY=ON ..
    $ make

## Build Substance Composer

    $ cd ..
    $ mkdir build
    $ cd build
	$ cmake ..
    $ make
    $ make install

## Enable Webkit Inspector

    $ defaults write quasipartikel.Substance WebKitDeveloperExtras -bool true


## Configure application

In order to use your own server (instead of Substance.io) you can overrule the Composer's settings by providing a config.json file in the root folder:
    
    {
      "hub": "http://localhost:3000",
      "hub_api": "http://localhost:3000/api/v1",
      "client_id": "YOUR_CLIENT_ID",
      "client_secret": "YOUR_CLIENT_SECRET"
    }

## Run Application

    $ cd ..
    $ ./build/app/osx/Substance.app/Contents/MacOS/Substance
    
## Access Redis (In DEVMODE)

	$ ext/redisdb/bin/redis-cli

# License

The Substance Composer is released under the MIT license. We chose a very libaral license because we wanted to make it easy for you to use Substance in your environment and also get involved into the development.